# 设备与平台交互 相关事件

##  __事件回调格式：__

> __(*eventCB)(event, errcode, value, valLen)__

##  __事件类别解析：__


 * __`event`__ ：qint32_t 类型。事件标识符。
 	*	__`1`__： 引导认证操作
 	*	__`2`__：接入操作 
 	*	__`3`__： 订阅操作 
 	*	__`4`__： 发送数据操作 
 	*	__`5`__： 接收数据操作 
 	*	__`6`__： 注销操作 
 	*	__`7`__： OTA 操作 
 	*	__`8`__： 平台事件
* __`errcode`__： qint32_t 类型。事件返回码。
* __`value`__：  const void * 类型。事件携带的数据。
* __`valLen`__： qint32_t 类型。事件携带的数据长度。

## __引导认证操作__

| 事件标识,事件码 | 值    |描述    |处理方式    |
|:--------:| :-------------:| :-------------:|:-------------:|
|1,10200|	NULL|	设备认证成功	||
|1,10404|	NULL|	平台内部接口调用错误	|设备内部错误，请联系移远云技术支持进行抓包分析|
|1,10422|	NULL|	设备已认证（连接失败）	|设备重复认证，需在开发者中心重置DeviceSecret|
|1,10423|	NULL|	查询产品信息失败（连接失败）	|设备ProductKey配置错误，检查ProductKey配置|
|1,10424|	NULL|	PAYLOAD解析失败（连接失败）	|可能性一：设备ProductKey配置错误，检查ProductSecret配置<br>可能性二：设备DeviceSecret解密失败，检查模组与平台的DeviceSecret|
|1,10425|	NULL|	签名验证未通过（连接失败）	|设备DeviceKey非法，DeviceKey长度不符合(4-32位，数字、字母大小写均可)|
|1,10427|	NULL|	散列信息不合法（连接失败）	|设备内部错误，请联系移远云技术支持进行抓包分析|
|1,10431|	NULL|	DK不合法（连接失败）	|设备DeviceKey非法，DeviceKey长度不符合(4-32位，数字、字母大小写均可)|
|1,10433|	NULL|	Flag不合法	|设备内部错误，联系移远云技术支持进行抓包分析|
|1,10434|	NULL|	ClientID与password不匹配（password中包涵ClientID相关信息）	|设备内部错误，请联系移远云技术支持进行抓包分析|
|1,10450|	NULL|	设备内部错误（连接失败）	|可能性一：设备暂无网络，请检查设备天线是否有接与注网状态<br>可能性二：设备内部错误，请联系移远云技术支持进行抓包分析|
|1,10500|	NULL|	设备认证失败（系统发生未知异常）	|设备内部错误，请联系移远云技术支持进行抓包分析|
|1,10300|	NULL|	其他错误	|设备内部错误，请联系移远云技术支持进行抓包分析|


## __接入操作__

| 事件标识,事件码 | 值    |描述    | 处理方式    |
|:--------:| :-------------:| :-------------:| :-------------:|
|2,10200|	NULL|	接入成功	||
|2,10404|	NULL|	平台内部接口调用错误	|设备内部错误，请联系移远云技术支持进行抓包分析|
|2,10430|	NULL|	设备密钥不正确（连接失败）	|设备DeviceSecret设置错误，需重置模组和平台的DeviceSecret|
|2,10431|	NULL|	设备被禁用（连接失败）	|设备内部错误，请联系移远云技术支持进行抓包分析|
|2,10433|	NULL|	Flag不合法	|设备内部错误，请联系移远云技术支持进行抓包分析|
|2,10434|	NULL|	ClientID与password不匹配（password中包涵ClientID相关信息）	|设备内部错误，请联系移远云技术支持进行抓包分析|
|2,10450|	NULL|	设备内部错误（连接失败）	|可能性一：设备暂无网络，请检查设备天线是否有接与注网状态<br>可能性二：设备内部错误，请联系移远云技术支持进行抓包分析|
|2,10471|	NULL|	实现方案版本不支持(连接失败)	|设备内部错误，请联系移远云技术支持进行抓包分析|
|2,10473|	NULL|	接入心跳异常（连接超时）	|设备暂无网络，请检查设备天线是否有接与注网状态|
|2,10474|	NULL|	网络异常（连接超时）	|设备暂无网络，请检查设备天线是否有接与注网状态|
|2,10475|	NULL|	服务器发生改变	|服务器或产品信息发生改变，需修改设备产品信息或服务器信息|
|2,10476|	NULL|	连接AP异常	|设备暂无网络，请检查设备天线是否有接与注网状态|
|2,10477|   NULL|   设备被禁用（连接失败） |设备DeviceKey非法，检查DeviceKey是否合法|
|2,10500|	NULL|	接入失败（系统发生未知异常）	|设备内部错误，请联系移远云技术支持进行抓包分析|


## __订阅操作__ 

| 事件标识,事件码 | 值    |描述    | 处理方式    |
|:--------:| :-------------:| :-------------:| :-------------:|
|3,10200|	NULL|	订阅成功	||
|3,10300|	NULL|	订阅失败	|设备内部错误，请联系移远云技术支持进行抓包分析|

## __发送数据操作__ 

| 事件标识,事件码 | 值    |描述    | 处理方式    |
|:--------:| :-------------:| :-------------:|:-------------:|
|4,10200	|NULL/qint32_t*类型|	透传数据发送成功||
|4,10210	|NULL/qint32_t*类型|	物模型数据发送成功||
|4,10220	|NULL/qint32_t*类型|	定位数据发送成功||
|4,10300	|NULL/qint32_t*类型|	透传数据发送失败|可能性一：设备发送数据长度与命令指定数据长度相异，检查发送数据的长度是否正确<br>可能性二：设备发送数据长度大于模组所支持的最大发送长度<br>可能性三：设备没有连接云平台，检查设备是否处于已上云状态 |
|4,10310	|NULL/qint32_t*类型|	物模型数据发送失败|可能性一：设备发送数据长度与命令指定数据长度相异，检查发送数据的长度是否正确<br>可能性二：设备发送数据长度大于模组所支持的最大发送长度<br>可能性三：设备没有连接云平台，检查设备是否处于已上云状态 |
|4,10320	|NULL/qint32_t*类型|	定位数据发送失败|
| 4,10330|NULL/qint32_t*类型| [,\<txid\>]状态数据发送失败 |
| 4,10340| NULL/qint32_t*类型|[,\<txid\>]设备信息发送失败|

##   __接收数据操作__ 

| 事件标识,事件码 | 值    |描述    | 
|:--------:| :-------------:| :-------------:|
| 5,10200|uint8_t*类型 |收到透传数据。||
| 5,10210| ttlv指针类型 |收到物模发数据。||
| 5,10211| uint16_t数组类型，格式：\<PkgID>,\<ID1>,\<ID2>… |收到物模型查询命令。<br/>\<PkgID\>	平台下发的请求包ID；<br/>\<ID\>	物模型ID；||


##   __注销操作__
 
| 事件标识,事件码 | 值    |描述    | 
|:--------:| :-------------:| :-------------:| 
| 6,10200| NULL|注销成功（断开连接成功） |

##  __OTA 操作__ 

| 事件标识,事件码 | 值    |描述    | 处理方式    |
|:--------:| :-------------:| :-------------:|:-------------:|
| 7,10700| 字符串类型，格式："\<componentNo\>","\<sourceVersion\>","\<targetVersion\>",\<batteryLimit\>,\<minSignalIntensity\>,\<useSpace\> |有升级任务，配置信息。<br/>\<componentNo\>		组件标识；<br/>\<sourceVersion\>		源版本；<br/>\<targetVersion\>		目标版本；<br/>\<batteryLimit\>		OTA升级最小电量；||
| 7,10701| 字符串类型，格式："\<componentNo\>",\<length\>,"\<MD5\>" |模块开始下载固件包。<br/>\<componentNo\>	组件标识；<br/>\<length\>		OTA升级固件包大小；<br/>\<MD5\>			OTA升级固件包md5值；||
| 7,10702| NULL|固件包下载中||
| 7,10703| 字符串类型，格式："\<componentNo\>","\<length\>","\<startaddr\>","\<piece_length\>" |固件包下载完成。<br/>\<componentNo>	组件标识；<br/>\<Length>		OTA升级固件包大小；<br/>\<startaddr>	OTA升级固件包的当前块起始位置；<br/>\<piece_length>	当前文件块大小；||
| 7,10704|NULL| 固件包更新中 ||
| 7,10705|NULL| 更新固件成功 ||
| 7,10706|NULL| 更新固件失败 |可能性一：平台升级计划目标版本配置错误，检查升级计划中的目标版本填写是否正确<br>可能性二：升级过程中网络中断，检查OTA升级途中是否有网络或者信号中断现象<br>可能性三：平台上传的升级包不正确，检查平台上传的升级包是否有效|
| 7,10707| NULL|首个设备操作结果广播 ||

##  __平台事件__

| 事件标识,事件码 | 值    |描述    | 处理方式    |
|:--------:| :-------------:| :-------------:| :-------------:|
| 8,10428| NULL| 设备高频消息导致限流 |设备发送消息过于频繁，请降低发送数据频率|
| 8,10429|NULL|  超过单设备激活数量或者每日请求数导致限流 |设备激活码不足，您可以联系当地销售进行价格咨询，由销售为您推进整个激活码的购买流程。

